{
  "stages": {
    "smithy": "blacksmith, dwarf",
    "destination": "distance > 300, distance < 900, difficulty medium to hard"
  },
  "actors": {
    "bob": "npc, dwarf, smith, age > 40",
    "soandso": "pc"
  },
  "props": {
    "bauble": "sword or dagger or amulet, value > 700"
  },
  "scenes": [
    {
      "dialogue": {
        "hook": {
          "oneOf": [
            {
              "trigger": "proximity({bob}, {pc}, 20)",
              "say": "Wait, I want to [talk] to you.",
              "branches": {
                "hookA": {
                  "trigger": "regex(talk)",
                  "goto": "explanation"
                }
              }
            }
          ]
        },
        "explanation": {
          "say": "I lost my ${bauble}, can you help me [get it back]?",
          "branches": {
            "explanationA": {
              "trigger": "regex(get.*back)",
              "goto": "finish"
            }
          }
        }
      },
      "behavior": {
        "bob": [
          {
            "type": "GoTo",
            "location": "{smithy}"
          }
        ]
      },
      "objective": {
        "type": "Variable",
        "key": "accepted",
        "value": true
      }
      "objective": {
        "type": "RandomSelect",
        "oneOf": [
          {
            "type": "Sequence",
            "do": [
              {
                "type": "Proximity",
                "from": "{bob}",
                "to": "{pc}",
                "distance": 20
              },
              {
                "type": "Dialogue",
                "lines": "Hey there, can you [help] me?"
              },
              {
                "type": "Dialogue",
                "expect": "help"
              }
            ]
          },
          {
            "type": "Sequence",
            "do": [
              {
                "type": "Proximity",
                "from": "{bob}",
                "to": "{pc}",
                "distance": 20
              },
              {
                "type": "Dialogue",
                "say": "Wait, I want to [talk] tp you."
              },
              {
                "type": "Dialogue",
                "expect": "talk"
              }
            ]
          }
        ]
      }
    },
    {
      "objective": {
        "type": "TakeAnItem",
        "item": "{bauble}",
        "from": "{destination}"
      }
    },
    {
      "id": "return the bauble",
      "location": "{smithy}",
      "objective": {
        "type": "GiveAnItem",
        "what": "{bauble}",
        "to": "{bob}"
      },
      "dialogue": {
        "oneOf": "Oh you found my {bauble}. Thank you! Here's some coin for your trouble."
      },
      "result": {
        "Favor": {
          "who": "{bob}",
          "amount": 1000
        },
        "GiveCoin": {
          "min": 300,
          "max": 700
        }
      }
    }
  ]
}