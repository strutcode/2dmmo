{
  "stages": {
    "smithy": "blacksmith, dwarf",
    "destination": "distance > 300, distance < 900, difficulty medium to hard"
  },
  "actors": {
    "bob": "npc, dwarf, smith, age > 40",
    "soandso": "pc"
  },
  "props": {
    "bauble": "sword or dagger or amulet, value > 700"
  },
  "scenes": [
    {
      "openingLine": "pick",
      "dialogue": {
        "pick": {
          "trigger": "proximity({bob}, {soandso}, 20)",
          "oneOf": [
            "hookA",
            "hookB"
          ]
        },
        "hookA": {
          "lines": [
            "Hey you, can you [help] me?"
          ]
        },
        "hookB": {
          "lines": [
            "Wait, I want to [talk] to you."
          ]
        },
        "explanation": {
          "lines": [
            "I lost my {bauble], can you help me [get it back]?"
          ],
          "next": [
            "accept"
          ]
        },
        "accept": {
          "trigger": "regex(get.*back)",
          "lines": [
            "Yay! I think I lost it near {destination}."
          ],
          "set": {
            "accepted": true
          }
        }
      },
      "objective": {
        "type": "Variable",
        "key": "accepted",
        "value": true
      }
    },
    {
      "script": [
        {
          "type": "Wait",
          "events": [
            {
              "type": "TakeAnItem",
              "item": "{bauble}",
              "from": "{destination}",
              "goto": 1
            }
          ]
        },
        {
          "type": "ChangeScene",
          "scene": "{next}"
        }
      ]
    },
    {
      "script": [
        {
          "type": "Wait",
          "events": [
            {
              "type": "GiveItems",
              "items": [
                "{bauble}"
              ],
              "to": "{bob}",
              "goto": 1
            }
          ]
        },
        {
          "type": "Sequence",
          "do": [
            2,
            3,
            4,
            5
          ]
        },
        {
          "type": "Say",
          "lines": [
            "Oh you found my {bauble}. Thank you! Here's some coin for your trouble."
          ]
        },
        {
          "type": "GiveItems",
          "coins": {
            "min": 300,
            "max": 600
          }
        },
        {
          "type": "ChangeStanding",
          "with": "{bob}",
          "by": 1000
        },
        {
          "type": "CompleteQuest"
        }
      ]
    }
  ]
}